function basics(){"use strict";$("#totals").html(allConsumptions.length+" consumptions in "+allExperiences.length+" experiences");var n=allExperiences.map(function(n){return{id:n.id,title:n.title,count:n.consumptions.length}}).sort(function(n,t){return n.count<t.count});$("#mostCon").html(n[0].count+' in <a href="/experience.html?'+n[0].id+'">'+n[0].title+"</a>"),analyticsFinished+=1}var analyticsCount,analyticsFinished,allDrugs,allConsumptions,allExperiences;analyticsCount+=1;
function top_listings(){"use strict";analyticsFinished+=1}var analyticsCount,analyticsFinished,allDrugs,allConsumptions,allExperiences;analyticsCount+=1;
function drugs(){"use strict";var n=[];allConsumptions.forEach(function(u){n.hasOwnProperty(u.drug.name)?(n[u.drug.name].count+=u.count,n[u.drug.name].number+=1):(n[u.drug.name]={},n[u.drug.name].count=u.count,n[u.drug.name].number=1,n[u.drug.name].unit=u.drug.unit)});var u=[];for(var t in n)n.hasOwnProperty(t)&&u.push({count:n[t].count,unit:n[t].unit,number:n[t].number,name:t});var r=u.sort(function(n,u){return u.number-n.number}).map(function(n){return n.count+" "+n.unit+" ("+n.number+" consumptions) of "+n.name}),a='<ul class="pad-left-40"><li>'+r.join("</li><li>")+"</li></ul>";$("#totalCons").html(a),analyticsFinished+=1}var analyticsCount,analyticsFinished,allDrugs,allConsumptions,allExperiences;analyticsCount+=1;
function experience_list(){"use strict";allExperiences.forEach(function(n){n.title.length<1&&(n.title="[none]");var e={};n.consumptions.forEach(function(n){e.hasOwnProperty(n.drug.name)?e[n.drug.name].count+=n.count:(e[n.drug.name]={},e[n.drug.name].count=n.count,e[n.drug.name].unit=n.drug.unit)});var t=[];if(Object.keys(e).length>0)for(var i in e)t.push(e[i].count+" "+e[i].unit+" "+i);else t.push("no consumptions");var o=[],a="Solo Experience";n.consumptions.forEach(function(n){n.friends.forEach(function(n){-1===o.indexOf(n.name)&&o.push(n.name)})}),o.length>0&&(a=o.join(", "));var c=[],s="[no location]";n.consumptions.forEach(function(n){-1===c.indexOf(n.location)&&c.push(n.location)}),c.length>0&&(s=c.join(", ")),$("#experiences-collection").append('<li class="collection-item">'+new Date(1e3*n.date).toISOString().slice(0,10)+'<span class="right hide-on-med-and-down" style="max-width: 50%;">'+a+" at <strong>"+s+'</strong></span><h5><a href="/experience.html?'+n.id+'">'+n.title+'</a></h5><div class="pad-left-40">'+t.join("<br />")+"</div></li>")}),analyticsFinished+=1}var analyticsCount,analyticsFinished,allDrugs,allConsumptions,allExperiences;analyticsCount+=1;
function friends(){"use strict";var n=[];allConsumptions.forEach(function(a){a.friends.forEach(function(a){n.hasOwnProperty(a.name)?n[a.name]=n[a.name]+1:n[a.name]=1})});var a=[];for(var t in n)n.hasOwnProperty(t)&&a.push({name:t,count:n[t]});var i=a.sort(function(n,a){return a.count-n.count}).map(function(n){return n.count+" ("+Math.round(n.count/allConsumptions.length*100)+"%) with "+n.name}),o='<ul class="pad-left-40">'+i.join("</li><li>")+"</li>";$("#friends").html(o),analyticsFinished+=1}var analyticsCount,analyticsFinished,allDrugs,allConsumptions,allExperiences;analyticsCount+=1;
function hourly_daily_breakdown(){"use strict";for(var t=[],o=0;23>=o;o+=1)t[o]=0;var n=6e4*(new Date).getTimezoneOffset();allConsumptions.forEach(function(o){var e=new Date(1e3*o.date+n),a=e.getHours();t[a]+=1}),$("#hourly").highcharts({chart:{type:"column"},title:{text:"Consumptions by Hour from "+$("#start").text()+" to "+$("#end").text()},xAxis:{categories:["0000 - 0100","0100 - 0200","0200 - 0300","0300 - 0400","0400 - 0500","0500 - 0600","0600 - 0700","0700 - 0800","0800 - 0900","0900 - 1000","1000 - 1100","1100 - 1200","1200 - 1300","1300 - 1400","1400 - 1500","1500 - 1600","1600 - 1700","1700 - 1800","1800 - 1900","1900 - 2000","2000 - 2100","2100 - 2200","2200 - 2300","2300 - 0000"],crosshair:!0},yAxis:{min:0,title:{text:"Consumptions"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}: </span>',pointFormat:"<b>{point.y} consumptions</b>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"Consumptions",data:t}]});var e=[];for(o=0;6>=o;o+=1)e[o]=0;allConsumptions.forEach(function(t){var o=new Date(1e3*t.date+n),a=o.getDay();e[a]+=1}),$("#daily").highcharts({chart:{type:"column"},title:{text:"Consumptions by Day from "+$("#start").text()+" to "+$("#end").text()},xAxis:{categories:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],crosshair:!0},yAxis:{min:0,title:{text:"Consumptions"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}: </span>',pointFormat:"<b>{point.y} consumptions</b>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"Consumptions",data:e}]}),setTimeout(function(){$("#daily").highcharts().reflow(),$("#hourly").highcharts().reflow()},2e3),analyticsFinished+=1}var analyticsCount,analyticsFinished,allDrugs,allConsumptions,allExperiences;analyticsCount+=1;